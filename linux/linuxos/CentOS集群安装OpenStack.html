<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<title>CentOS集群安装OpenStack</title>
<!-- 2014-11-24 周一 18:53 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="author" content="visayafan"/>
</head>
<body>
<div id="content">
<h1 class="title">CentOS集群安装OpenStack</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. OpenStack命令</a>
<ul>
<li><a href="#sec-1-1">1.1. 帮助</a></li>
<li><a href="#sec-1-2">1.2. nova network-list</a></li>
<li><a href="#sec-1-3">1.3. nova-manage service list</a></li>
<li><a href="#sec-1-4">1.4. image操作</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. nova image-list</a></li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. 安全组</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1. nova secgroup-list</a></li>
<li><a href="#sec-1-5-2">1.5.2. nova secgroup-list-rules GROUPNAME</a></li>
<li><a href="#sec-1-5-3">1.5.3. nova secgroup-add-rule default tcp 22 22 0.0.0.0/0</a></li>
<li><a href="#sec-1-5-4">1.5.4. nova secgroup-add-rule default icmp -1 -1 0.0.0.0/0</a></li>
</ul>
</li>
<li><a href="#sec-1-6">1.6. VM操作</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1. nova boot &#x2013;flavor FLAVORTYPE &#x2013;key_name KEYPAIRNAME &#x2013;image IMAGEID NEWINSTANCENAME</a></li>
<li><a href="#sec-1-6-2">1.6.2. nova delete VMName</a></li>
</ul>
</li>
<li><a href="#sec-1-7">1.7. flavor操作</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1. nova flavor-list</a></li>
<li><a href="#sec-1-7-2">1.7.2. nova flavor-create FLAVOR_NAME FLAVOR_ID RAM_IN_MB ROOT_DISK_IN_GB NUMBER_OF_VCPUS</a></li>
<li><a href="#sec-1-7-3">1.7.3. nova flavor-access-add FLAVOR TENANT_ID</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">2. 经验</a>
<ul>
<li><a href="#sec-2-1">2.1. 重启OpenStack</a></li>
<li><a href="#sec-2-2">2.2. 删除顺序</a></li>
<li><a href="#sec-2-3">2.3. 端口映射访问VNC</a></li>
<li><a href="#sec-2-4">2.4. 自己创建镜像</a></li>
<li><a href="#sec-2-5">2.5. 对象存储</a></li>
</ul>
</li>
</ul>
</div>
</div>
<!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"> </script> -->
<link rel="stylesheet" type="text/css" href="../../layout/css/bootstrap_old.css" />
<link rel="stylesheet" type="text/css" href="../../layout/css/style.css" />
<script src="../../layout/js/jquery_1.7.1.js"></script>
<script src="../../layout/js/bootstrap_old.js"></script>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> OpenStack命令</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 帮助</h3>
<div class="outline-text-3" id="text-1-1">
<pre class="example">
nova help
nova help|grep flavor
nova help flavor-list
</pre>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> nova network-list</h3>
<div class="outline-text-3" id="text-1-2">
<p>
查看创建的网络<br/>
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> nova-manage service list</h3>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> image操作</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> nova image-list</h4>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> 安全组</h3>
<div class="outline-text-3" id="text-1-5">
</div><div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> nova secgroup-list</h4>
</div>
<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> nova secgroup-list-rules GROUPNAME</h4>
</div>
<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> nova secgroup-add-rule default tcp 22 22 0.0.0.0/0</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
允许SSH登陆<br/>
</p>
</div>
</div>

<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4"><span class="section-number-4">1.5.4</span> nova secgroup-add-rule default icmp -1 -1 0.0.0.0/0</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
允许ping<br/>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> VM操作</h3>
<div class="outline-text-3" id="text-1-6">
</div><div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> nova boot &#x2013;flavor FLAVORTYPE &#x2013;key_name KEYPAIRNAME &#x2013;image IMAGEID NEWINSTANCENAME</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
启动一个实例<br/>
</p>
</div>
</div>

<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> nova delete VMName</h4>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> flavor操作</h3>
<div class="outline-text-3" id="text-1-7">
</div><div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> nova flavor-list</h4>
</div>

<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> nova flavor-create FLAVOR_NAME FLAVOR_ID RAM_IN_MB ROOT_DISK_IN_GB NUMBER_OF_VCPUS</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
<a href="http://docs.openstack.org/user-guide-admin/content/cli_manage_flavors.html">http://docs.openstack.org/user-guide-admin/content/cli_manage_flavors.html</a><br/>
</p>
</div>
</div>

<div id="outline-container-sec-1-7-3" class="outline-4">
<h4 id="sec-1-7-3"><span class="section-number-4">1.7.3</span> nova flavor-access-add FLAVOR TENANT_ID</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
将其添加到指定tenant中<br/>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 经验</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 重启OpenStack</h3>
<div class="outline-text-3" id="text-2-1">
<pre class="example">
##############################controller##############################
service openstack-nova-api restart
service openstack-nova-cert restart
service openstack-nova-conductor restart
service openstack-nova-consolerestart
service openstack-nova-consoleauth restart
service openstack-nova-metadata-apirestart
service openstack-nova-novncproxy restart
service openstack-nova-scheduler restart
##############################compute##############################
service openstack-nova-compute restart
#######################################################################
</pre>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 删除顺序</h3>
<div class="outline-text-3" id="text-2-2">
<p>
You need to delete the instances.<br/>
Delete the Floating Ips.<br/>
Then delete the Interfaces of Router and delete Router.<br/>
Then delete the subnets, network ports, and then the  Networks.<br/>
</p>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 端口映射访问VNC</h3>
<div class="outline-text-3" id="text-2-3">
<pre class="example">
nova get-vnc-console INSTANCE_NAME  novnc
</pre>
<p>
得到类似<a href="http://192.168.1.105:6080/vnc_auto.html?token=246bf84d-1e92-48f0-8d03-cf9f50ed1dd8">http://192.168.1.105:6080/vnc_auto.html?token=246bf84d-1e92-48f0-8d03-cf9f50ed1dd8</a> 的链接，在路由器上对6080进行端口映射，并用公网地址替换192.168.1.105。<br/>
</p>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> 自己创建镜像</h3>
<div class="outline-text-3" id="text-2-4">
<p>
<a href="http://docs.openstack.org/image-guide/content/ubuntu-image.html">http://docs.openstack.org/image-guide/content/ubuntu-image.html</a><br/>
</p>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 对象存储</h3>
<div class="outline-text-3" id="text-2-5">
<p>
无论是放在DB中记录或OS中的文件或声音或图像，保存对象存储服务器中。<br/>
Amazon AW3<br/>
</p>

<p>
统一存储设备  bulk    传统：文件分成块存储<br/>
硬件完成 块操作<br/>
OS面对的是字节流<br/>
</p>
</div>
</div>
</div>
</div>
</body>
</html>
